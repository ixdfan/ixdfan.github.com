<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Nginx的IO多路复用 &#8211; 高手之路</title>
<meta name="description" content="">
<meta name="keywords" content="">


<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx的IO多路复用">
<meta property="og:description" content="专注于linux下程序设计">
<meta property="og:url" content="http://localhost:4000/2014/05/06/nginx-event/">
<meta property="og:site_name" content="高手之路">





<link rel="canonical" href="http://localhost:4000/2014/05/06/nginx-event/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="高手之路 Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.min.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
	<script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="http://localhost:4000">高手之路</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				<li><a href="http://localhost:4000" >Home</a></li>
		        
				<li><a href="http://localhost:4000/category/" >Category</a></li>
		        
				<li><a href="http://localhost:4000/posts/" >Posts</a></li>
		        
				<li><a href="http://localhost:4000/about/" >About</a></li>
		        
				<li><a href="http://localhost:4000/comment/" >Leave a message</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    <img src="http://localhost:4000/images/Neo.jpg" class="bio-photo" alt="Neo bio photo"></a>
<h3>Neo</h3>
<p>每一个优秀的人,都会有一段沉默的时光. 那一段时光,是付出了很多努力,忍受孤独和寂寞,不抱怨不诉苦. 日后说起时,连自己都能被感动的日子.</p>














<ul>
    
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the linux" title="view all
posts">the linux <span style="margin-left:10px;">(44)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the other" title="view all
posts">the other <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the life" title="view all
posts">the life <span style="margin-left:10px;">(7)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the c\c++" title="view all
posts">the c\c++ <span style="margin-left:10px;">(25)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the win32asm" title="view all
posts">the win32asm <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the datebase" title="view all
posts">the datebase <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the tool" title="view all
posts">the tool <span style="margin-left:10px;">(21)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the algorithm" title="view all
posts">the algorithm <span style="margin-left:10px;">(14)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#操作系统" title="view all
posts">操作系统 <span style="margin-left:10px;">(1)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#剑指offer" title="view all
posts">剑指offer <span style="margin-left:10px;">(6)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#信号" title="view all
posts">信号 <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#网络编程" title="view all
posts">网络编程 <span style="margin-left:10px;">(13)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#编程珠玑" title="view all
posts">编程珠玑 <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#gdb" title="view all
posts">gdb <span style="margin-left:10px;">(12)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#nginx" title="view all
posts">nginx <span style="margin-left:10px;">(17)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#vim" title="view all
posts">vim <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#线程" title="view all
posts">线程 <span style="margin-left:10px;">(9)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#makefile" title="view all
posts">makefile <span style="margin-left:10px;">(5)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the reading" title="view all
posts">the reading <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#stl" title="view all
posts">stl <span style="margin-left:10px;">(11)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#树" title="view all
posts">树 <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#shell" title="view all
posts">shell <span style="margin-left:10px;">(15)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#sed" title="view all
posts">sed <span style="margin-left:10px;">(5)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#awk" title="view all
posts">awk <span style="margin-left:10px;">(5)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#进程" title="view all
posts">进程 <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#排序" title="view all
posts">排序 <span style="margin-left:10px;">(1)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the network" title="view all
posts">the network <span style="margin-left:10px;">(3)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#mysql" title="view all
posts">mysql <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#security" title="view all
posts">security <span style="margin-left:10px;">(1)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#kernel" title="view all
posts">kernel <span style="margin-left:10px;">(2)</span></a>
    </li>
    
</ul>


  </div>
  <article>
    <div class="headline-wrap">
      <h1>Nginx的IO多路复用</h1>
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>Nginx是以事件驱动的，也就是说nginx内部流程向前推进基本都是靠各种事件的发生来驱动，否则nginx将一直阻塞在函数epoll_wait和sigsuspend这样的系统调用上，nginx工作进程关注的事件有两类:IO事件与定时器事件。</p>

<h5>IO复用模型</h5>

<p>无论是哪种IO复用模型，基本原理都是相同的，他们都能让应用程序同时对多个IO端口进行监控以判断其上的操作是否可以进行，达到时间复用的目的(单位时间内，可以同时监控很多)。</p>

<p>这个例子非常的形象:</p>

<p>如果要监控10根来自不同地方的水管(IO端口)是否有水流达到(是否可读)，那么需要10个人来做这件事情(10个线程或10处代码)，如果利用某种技术(比如摄像头)把10根水管的状态统一传达到某个点，那么就只需要1人在那个点进行监控就行了，类似于select或是epoll这样的多路IO复用机制就好比是摄像头的功能，他们能把多个IO端口的情况反馈到同一处，比如某个特定的文件描述符上，这样应用程序只需要对应的select或是epoll_wait调用阻塞关注这一处即可.</p>

<p>不同平台支持不同的IO多路复用模型，Nginx对这些IO多路复用模型进行封装和使用，IO多路复用模型被封装在一个叫做ngx_event_atcionts_t的结构体中，该结构体中包含的字段主要就是回调函数</p>

<pre><code>230 typedef struct {

        /*  将某个描述符的某个事件(可读/可写)添加到多路复用的监控  */
231     ngx_int_t  (*add)(ngx_event_t *ev, ngx_int_t event, ngx_uint_t flags);
        /*  将某个描述符的某个事件(可读/可写)从多路复用的监控中删除   */
232     ngx_int_t  (*del)(ngx_event_t *ev, ngx_int_t event, ngx_uint_t flags);
233 
        /*  启用对某个事件的监控  */
234     ngx_int_t  (*enable)(ngx_event_t *ev, ngx_int_t event, ngx_uint_t flags);

        /*  禁用对某个指定事件的监控    */
235     ngx_int_t  (*disable)(ngx_event_t *ev, ngx_int_t event, ngx_uint_t flags);
236 
        /*  将指定连接关联的描述符加入到多路复用监控里 */
237     ngx_int_t  (*add_conn)(ngx_connection_t *c);

        /*  将指定连接关联的描述符从多路复用监控里删除 */
238     ngx_int_t  (*del_conn)(ngx_connection_t *c, ngx_uint_t flags);

239     /*  仅仅对kqueue才会用到这个接口，所以没什么用    */ 
240     ngx_int_t  (*process_changes)(ngx_cycle_t *cycle, ngx_uint_t nowait);

        /*  阻塞等待时间发生，对发生的时间进行逐个处理 */
241     ngx_int_t  (*process_events)(ngx_cycle_t *cycle, ngx_msec_t timer,
242                    ngx_uint_t flags);
243 
        /*  初始化   */
244     ngx_int_t  (*init)(ngx_cycle_t *cycle, ngx_msec_t timer);
        /*  回收资源    */
245     void       (*done)(ngx_cycle_t *cycle);
246 } ngx_event_actions_t;
247 
248 
249 extern ngx_event_actions_t   ngx_event_actions;
</code></pre>

<p>由于多路复用模型各自具体的实现不同，上面列出的接口可能在Nginx的IO多路复用处理模块里没有对应的处理，但几个最近本的接口例如add/del/process_events肯定会有实现的。</p>

<p>为了方便使用任何一种事件处理机制，Nginx定义一个类型为ngx_event_actions_t的全局变量ngx_event_actions，并且定义了几个宏</p>

<pre><code>448 #define ngx_process_changes  ngx_event_actions.process_changes
449 #define ngx_process_events   ngx_event_actions.process_events
450 #define ngx_done_events      ngx_event_actions.done
451 
452 #define ngx_add_event        ngx_event_actions.add
453 #define ngx_del_event        ngx_event_actions.del
454 #define ngx_add_conn         ngx_event_actions.add_conn
455 #define ngx_del_conn         ngx_event_actions.del_conn
</code></pre>

<p>这样Nginx要将某个时间添加到多路复用监控里，只需要调用ngx_add_event()即可，至于这个函数对应到哪个具体的IO多路复用模块上，就不必关心！</p>

<p>ngx_add_event()函数是如何关联到具体的IO多路复用处理模块上的呢？</p>

<p>关键在于全局变量ngx_event_actions的值，为全局变量ngx_event_actions进行赋值出现在各个时间处理模块的初始化函数内,例如epoll模块。</p>

<pre><code>491 typedef struct {
492     ngx_str_t              *name;
493 
494     void                 *(*create_conf)(ngx_cycle_t *cycle);
495     char                 *(*init_conf)(ngx_cycle_t *cycle, void *conf);
496 
497     ngx_event_actions_t     actions;    /*  action的定义在上面，成员主要是一些回调函数    */
498 } ngx_event_module_t;



149 ngx_event_module_t  ngx_epoll_module_ctx = {
150     &amp;epoll_name,
151     ngx_epoll_create_conf,               /* create configuration */
152     ngx_epoll_init_conf,                 /* init configuration */
153     
154     {
            /*  与ngx_event_actions_t中的函数一一对应  */
155         ngx_epoll_add_event,             /* add an event */
156         ngx_epoll_del_event,             /* delete an event */
157         ngx_epoll_add_event,             /* enable an event */
158         ngx_epoll_del_event,             /* disable an event */
159         ngx_epoll_add_connection,        /* add an connection */
160         ngx_epoll_del_connection,        /* delete an connection */
161         NULL,                            /* process the changes */
162         ngx_epoll_process_events,        /* process the events */
163         ngx_epoll_init,                  /* init the events */
164         ngx_epoll_done,                  /* done the events */
165     }
166 };  



288 static ngx_int_t
289 ngx_epoll_init(ngx_cycle_t *cycle, ngx_msec_t timer)
290 {
291     ngx_epoll_conf_t  *epcf;
292 
293     epcf = ngx_event_get_conf(cycle-&gt;conf_ctx, ngx_epoll_module);
294 
295     if (ep == -1) {
296         ep = epoll_create(cycle-&gt;connection_n / 2);
297 
298         if (ep == -1) {
299             ngx_log_error(NGX_LOG_EMERG, cycle-&gt;log, ngx_errno,
300                           "epoll_create() failed");
301             return NGX_ERROR;
302         }
303 
304 #if (NGX_HAVE_FILE_AIO)
305 
306         ngx_epoll_aio_init(cycle, epcf);
307 
308 #endif
309     }
310 
311     if (nevents &lt; epcf-&gt;events) {
312         if (event_list) {
313             ngx_free(event_list);
314         }
315 
316         event_list = ngx_alloc(sizeof(struct epoll_event) * epcf-&gt;events,
317                                cycle-&gt;log);
318         if (event_list == NULL) {
319             return NGX_ERROR;
320         }
321     }
322 
323     nevents = epcf-&gt;events;
324 
325     ngx_io = ngx_os_io;
326 
        /*  全局变量关联上来了,这个ngx_epoll_module_ctx.action是一个结构体 */
327     ngx_event_actions = ngx_epoll_module_ctx.actions;
328 
329 #if (NGX_HAVE_CLEAR_EVENT)
330     ngx_event_flags = NGX_USE_CLEAR_EVENT
331 #else
332     ngx_event_flags = NGX_USE_LEVEL_EVENT
333 #endif
334                       |NGX_USE_GREEDY_EVENT
335                       |NGX_USE_EPOLL_EVENT;
336 
337     return NGX_OK;
338 }
</code></pre>

<p>327行就是对epoll模块的ngx_event_actions赋值，而在其他时间处理模块的初始化函数内也可以看到这样的赋值语句，所以一旦指定了nginx使用某个事件处理模块，经过事件处理模块的初始化后，就把全局变量ngx_event_actions指向了他的封装，比如ngx_add_event()调用的就是上面的ngx_epoll_add_event()函数</p>

<p>设定nginx使用那个事件处理机制是通过在event块中使用use指令来指定的，该配置指令对应的处理函数为ngx_event_use()函数</p>

<p>经过相关验证，比如检验该指定模块是否存在后，就会将对应的事件处理模块序号记录到efc->use中，如果不进行主动指定，则nginx会根据当前系统平台选择一个合适的事件处理模块，并且同样把模块序号记录在efc->use中，相关函数是ngx_event_core_init_conf</p>

<p>工作进程的初始化函数ngx_worker_process_init函数中会调用时间核心模块的初始化函数ngx_event_process_init,在该函数中根据ecf->use的值来调用对应的时间处理模块的初始化函数,例如epoll模块的ngx_epoll_init模块</p>

<pre><code>584 ngx_event_process_init(ngx_cycle_t *cycle)
585 {
586     ngx_uint_t           m, i;
587     ngx_event_t         *rev, *wev;
588     ngx_listening_t     *ls;
589     ngx_connection_t    *c, *next, *old;
590     ngx_core_conf_t     *ccf;
591     ngx_event_conf_t    *ecf;
592     ngx_event_module_t  *module;
593 
594     ccf = (ngx_core_conf_t *) ngx_get_conf(cycle-&gt;conf_ctx, ngx_core_module);
595     ecf = ngx_event_get_conf(cycle-&gt;conf_ctx, ngx_event_core_module);
596 
597     /*  
598      *      1。只有在多进程的模型下
599      *      2. worker进程数大于1
600      *      3. 手动开启负载均衡     如果没有指定，则默认设置为开启模式
601      *      满足以上三个条件才会开启负载均衡
602     */
603     if (ccf-&gt;master &amp;&amp; ccf-&gt;worker_processes &gt; 1 &amp;&amp; ecf-&gt;accept_mutex) {
604         ngx_use_accept_mutex = 1;   /*  开启负载均衡    */
605         ngx_accept_mutex_held = 0;
606         ngx_accept_mutex_delay = ecf-&gt;accept_mutex_delay;
607 
608     } else {
609         ngx_use_accept_mutex = 0;   /*  没有开启    */
610     }
611 
612 #if (NGX_THREADS)
613     ngx_posted_events_mutex = ngx_mutex_init(cycle-&gt;log, 0);
614     if (ngx_posted_events_mutex == NULL) {
615         return NGX_ERROR;
616     }
617 #endif
618 
619     if (ngx_event_timer_init(cycle-&gt;log) == NGX_ERROR) {
620         return NGX_ERROR;
621     }
622 
            /*  遍历查找对应的模块 */
623     for (m = 0; ngx_modules[m]; m++) {
            /*  首先类型要为NGX_EVENT_MODULE  */
624         if (ngx_modules[m]-&gt;type != NGX_EVENT_MODULE) {
625             continue;
626         }
627 
628         /*  然后在同类模块中的编号要相等 */
629         if (ngx_modules[m]-&gt;ctx_index != ecf-&gt;use) {
630             continue;
631         }
632 
633         module = ngx_modules[m]-&gt;ctx;           /*  对应模块特有的数据 */
634 
635         if (module-&gt;actions.init(cycle, ngx_timer_resolution) != NGX_OK) {
636             /* fatal */
637             exit(2);
638         }
639 
640         break;
641     }
642 


543 typedef struct {
544     ngx_uint_t    connections;      /*   连接池的大小 */
544     ngx_uint_t    use;              /*  选用的事件模块在同类事件模块中的序号  */
545     ngx_flag_t    multi_accept;     /*  标志位，如果为1，则表示在接收到一个新连接事件时，一次性建立尽可能多的连接   */
546     /*  标识位，为1表示启用负载均衡锁 */
547     ngx_flag_t    accept_mutex;
        /*
        *   负载均衡锁会使有些worker进程在拿不到锁时延迟建立新连接
        *   accept_mutex_delay就是这段延迟时间的长度
        */
548     ngx_msec_t    accept_mutex_delay;
549    u_char       *name;              /*   所选用事件模块的名字，它与use成员是匹配的   */
550 #if (NGX_DEBUG)   
551     ngx_array_t   debug_connection;
552 #endif
553 } ngx_event_conf_t;
</code></pre>

<p><img src="/uploads/2014/05/013.png" alt="013" /></p>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          <img src="http://localhost:4000/images/Neo.jpg" class="bio-photo" alt="Neo bio photo"></a>
<h3>Neo</h3>
<p>每一个优秀的人,都会有一段沉默的时光. 那一段时光,是付出了很多努力,忍受孤独和寂寞,不抱怨不诉苦. 日后说起时,连自己都能被感动的日子.</p>














<ul>
    
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the linux" title="view all
posts">the linux <span style="margin-left:10px;">(44)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the other" title="view all
posts">the other <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the life" title="view all
posts">the life <span style="margin-left:10px;">(7)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the c\c++" title="view all
posts">the c\c++ <span style="margin-left:10px;">(25)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the win32asm" title="view all
posts">the win32asm <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the datebase" title="view all
posts">the datebase <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the tool" title="view all
posts">the tool <span style="margin-left:10px;">(21)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the algorithm" title="view all
posts">the algorithm <span style="margin-left:10px;">(14)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#操作系统" title="view all
posts">操作系统 <span style="margin-left:10px;">(1)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#剑指offer" title="view all
posts">剑指offer <span style="margin-left:10px;">(6)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#信号" title="view all
posts">信号 <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#网络编程" title="view all
posts">网络编程 <span style="margin-left:10px;">(13)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#编程珠玑" title="view all
posts">编程珠玑 <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#gdb" title="view all
posts">gdb <span style="margin-left:10px;">(12)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#nginx" title="view all
posts">nginx <span style="margin-left:10px;">(17)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#vim" title="view all
posts">vim <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#线程" title="view all
posts">线程 <span style="margin-left:10px;">(9)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#makefile" title="view all
posts">makefile <span style="margin-left:10px;">(5)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the reading" title="view all
posts">the reading <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#stl" title="view all
posts">stl <span style="margin-left:10px;">(11)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#树" title="view all
posts">树 <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#shell" title="view all
posts">shell <span style="margin-left:10px;">(15)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#sed" title="view all
posts">sed <span style="margin-left:10px;">(5)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#awk" title="view all
posts">awk <span style="margin-left:10px;">(5)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#进程" title="view all
posts">进程 <span style="margin-left:10px;">(2)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#排序" title="view all
posts">排序 <span style="margin-left:10px;">(1)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#the network" title="view all
posts">the network <span style="margin-left:10px;">(3)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#mysql" title="view all
posts">mysql <span style="margin-left:10px;">(4)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#security" title="view all
posts">security <span style="margin-left:10px;">(1)</span></a>
    </li>
    
    <li style="line-height:20px;list-style:none;font-weight:bold;"><a href="http://localhost:4000/category/#kernel" title="view all
posts">kernel <span style="margin-left:10px;">(2)</span></a>
    </li>
    
</ul>


        </div>
        <p class="byline"><strong>Nginx的IO多路复用</strong> was published on <time datetime="2014-05-06T00:00:00+00:00">May 06, 2014</time> by <a href="http://localhost:4000/about" title="About Neo">Neo</a>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="http://localhost:4000/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="http://localhost:4000/2014/06/06/shell-sed-error/" title="sed error:unterminated `s' command">sed error:unterminated `s' command</a></li>
    
      <li><a href="http://localhost:4000/2014/06/05/shell-debug/" title="shell脚本的调试">shell脚本的调试</a></li>
    
      <li><a href="http://localhost:4000/2014/06/05/kernel-memory-align/" title="内存对齐的实现">内存对齐的实现</a></li>
    
    </ul>
    <hr />
        <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'ucshellcom'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
  </div><!-- /.related-articles -->
  <footer>
    <br></br>
<br></br>
<span>&copy; 2013 - 2014 高手之路 ucshell.com , All Rights Reserved.   </span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>
	        

</body>
</html>